const t=(t,e,r)=>t[e]=t[e]??r;var e=Object.freeze({__proto__:null,computeIfAbsent:t});const r=t=>t instanceof s?t.current:t,n=(t,e,...n)=>{let s=r(e);n.forEach((e=>{let n=r(e);n instanceof HTMLElement?s.insertAdjacentElement(t,n):s.insertAdjacentText(t,e)}))};class s extends class extends class extends class{current;constructor(t="div"){this.current="string"==typeof t?document.createElement(t):t}attr(t={}){return"string"==typeof t?this.current.getAttribute(t):(Object.entries(t).forEach((([t,e])=>{null!=e?this.current.setAttribute(t,e+""):this.current.removeAttribute(t)})),this)}}{_qy_eventMap=new Map;on(t,e,r){if(void 0!==e){let n=e.bind(this),s=t=>{n(Object.assign(t,{qyTarget:this}))},i=this._qy_eventMap.get(t)??new Map;this._qy_eventMap.set(t,i.set(e,s)),this.current.addEventListener(t,s,r)}return this}un(t,e,r){let n=this._qy_eventMap.get(t)??new Map,s=n.get(e);return n.delete(e),this.current.removeEventListener(t,s,r),this.current.removeEventListener(t,e,r),this}dispatch(t,e={},r=!0,n=!0){let s=new CustomEvent(t,{bubbles:r,cancelable:n});return Object.assign(s,e),this.current.dispatchEvent(s),this}}{provide(e,r){return t(this.current,"_qy_provider",new Map)?.set(e,r),this}inject(t){let e=this.current;do{let r=e._qy_provider?.get(t);if(void 0!==r)return r;e=e.parentElement}while(null!==e)}}{append(...t){return n("beforeend",this,...t),this}appendTo(t){return n("beforeend",t,this),this}prepend(...t){return n("afterbegin",this,...t),this}prependTo(t){return n("afterbegin",t,this),this}after(...t){return n("afterend",this,...t),this}afterTo(t){return n("afterend",t,this),this}before(...t){return n("beforebegin",this,...t),this}beforeTo(t){return n("beforebegin",t,this),this}empty(){return this.current.innerHTML="",this}unlink(){this.current.parentElement?.removeChild(this.current)}}const i=t=>t.trim().split(" ").filter((t=>""!==t));class o extends s{style(...t){return t.forEach((t=>{t instanceof CSSStyleDeclaration?this.current.classList.add(...t._qingid):"string"==typeof t?this.current.classList.add(...i(t)):Object.assign(this.current.style,t)})),this}removeStyle(...t){return t.forEach((t=>{"string"==typeof t?this.current.classList.remove(...i(t)):this.current.classList.remove(t._qingid)})),this}toggleStyle(...t){return t.forEach((t=>{"string"==typeof t?i(t).forEach((t=>{this.current.classList.toggle(t)})):this.current.classList.toggle(t._qingid)})),this}hasStyle(t){let e;return e="string"==typeof t?i(t):t._qingid,!e.some((t=>!this.current.classList.contains(t)))}show(t=!0){return this.style({display:t?"":"none"}),this}}const c=o;class h extends o{props;fitting(t){}decorate(t,e){}motion(t,e){}constructor(t,e){super(e),this.props=t,this.fitting(t),this.decorate(t,this),this.motion(t,this)}}const a=(t,e)=>new c(t).style(e),l=t=>new c(t),u="_-0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",d=t=>new Array(t).fill(0).map((()=>u[Math.floor(Math.random()*u.length)])).join(""),p=t=>u[Math.floor(Math.random()*(u.length-12)+12)]+d(t-1);var f=Object.freeze({__proto__:null,randomString:d,randomVarName:p});const g=(t,e)=>{let r=(0===document.styleSheets.length&&n("beforeend",document.head,document.createElement("style")),document.styleSheets[document.styleSheets.length-1]),s=r.cssRules[r.insertRule(`${t}{}`,r.cssRules.length)];return((t,e,r)=>{Object.entries(r).forEach((([r,n])=>{r.startsWith("&")?g(r.replaceAll("&",t),n):e[r]=n}))})(t,s.style,e),s.style},m=(t,e="")=>{let r=p(7),n=g(`.${r}${e}`,t);return n._qingid=[r],n},y=(...t)=>{let e={},r=[];t.forEach((t=>{t instanceof CSSStyleDeclaration?r.push(...t._qingid):Object.assign(e,t)}));let n=m(e);return n._qingid.push(...r),n},_=(t,e)=>m(e,t);var b=Object.freeze({__proto__:null,StringUtil:f});export{e as ObjectUtil,c as QyElement,h as QyElementDirty,b as StringUtil,a as createElement,_ as createPseudoStyle,y as createStyle,l as wrap2QyElement};
